## 콘서트 예약 시스템 

## 대기열 토큰 (Queue Token)
### RDBMS를 사용하여 대기열 토큰 발행
- 대기열을 관리하는 테이블을 생성하여 사용자 요청에 따라 토큰을 발행합니다.
- 사용자가 예약을 요청하면, 유니크한 토큰을 생성하고 해당 사용자의 정보와 함께 테이블에 저장합니다.
- 토큰을 생성하는 방식은 UUID로 생성합니다.
- 대기열에서 요청을 처리할 때는 상태값을 업데이트 합니다.

(이번에 Redis로 하진 않지만)
### 왜 Redis로 구현하는 것이 더 나은가?
1. 빠른 처리속도
  : 모든 데이터를 메모리에 저장하고 접근하여 매우 빠름
2. 분산 시스템 지원
  : 기본적으로 분산 시스템을 지원하여 여러 서버에서 동시에 데이터를 처리하고 공유가능
3. 원자성 보장
  : 원자적으로 실행되어, 대기열에서 동시 다발적으로 요청이 있을 때 중복 처리나 충돌 방지에 효과적
4. TTL(Time to Live)
  : 특정 키에 TTL을 설정할 수 있어, 만약 사용자가 일정 시간 내 예약을 완료하지 않으면 자동으로 대기열에서 제거 가능



## 패키지 구조
```bash
├── controller
│   ├── concert
│   ├── queue
│   ├── point
│   └── payment
├── service
│   ├── concert
│   ├── queue
│   ├── point
│   └── payment
├── domian
│   ├── concert
│   ├── queue
│   ├── point
│   └── payment
├── persistence
│   ├── concert
│   ├── queue
│   ├── point
│   └── payment
└── run.sh
```
### 이유
레이어드 아키텍처 기반으로 작성하여 각 레이어마다 도메인(useCase?)별로 분류했다고 생각합니다.
각 레이어를 loosely coupling 된 형태로 구축하면서, 각각 자신의 관심사에만 집중할 수 있고 유지보수와 확장성에 유리하다고 생각합니다.

Facade를 사용해보고싶었으나 , 서비스레이어와 책임을 분리하기 어렵다고 판단( 협업시나 유지보수 시 비즈니스 로직을 어디에 추가해야되는지 의아) 되어 Facade는 추가하지않았습니다.


## 테이블 설계
![콘서트 티켓팅 (1)](https://github.com/user-attachments/assets/0bb05d1c-41af-4c8b-a995-2dc705ef6a23)

초기에는 콘서트 테이블을 하나로 두었는데, 찾아보니 성능과 확장성 이슈로 콘서트 테이블을 분리시킨걸 보고 분리했습니다. 어떤 이점이 있는지는 모르겠습니다.
해당 내용과 관련된 내용인지 모르겠지만, 유저테이블에서도 트랜잭션(?) 관련하여 포인트 테이블을 따로 둔다고 하는걸 지나가는말로 들었는데, 아무래도 잘 모르겠어서 유저테이블은에 포인트 컬럼으로 함께 두었습니다.



